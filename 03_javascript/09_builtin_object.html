<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>builtin_object</title>
</head>
<body>

  <script>
    /*
      < JSON 내장 객체 >
      1. 자바스크립트 객체 -> string 형식의 JSON 데이터
        1) 서버로 데이터를 보낼 때 활용
        2) 형식 : JSON.stringify(JS객체)
      2. string 형식의 JSON 데이터 -> 자바스크립트 객체
        1) 서버에서 받은 데이터를 분석할 때 활용
        2) 형식 : JSON.parse(문자열JSON)
    */

    // 자바스크립트 객체
    var car = {
      maker: 'BMW',
      model: '5series'
    };

    // 자바스크립트 객체 -> string 형식의 JSON 데이터
    var jsonData = JSON.stringify(car);
    console.log(jsonData, typeof jsonData);

    // string 형식의 JSON 데이터 -> 자바스크립트 객체
    var jsObj = JSON.parse(jsonData);
    console.log(jsObj, typeof jsObj);

  </script>

  <script>
    /*
      < Array 내장 객체 >
      1. forEach() : 반복문
      2. filter()  : 요소 검사
      3. map()     : 요소 바꾸기
    */

    // 배열
    var array = ['game', 'traveling', 'cooking', 'movie', 'fishing'];

    // forEach()
    array.forEach(function(element){  // array의 모든 요소가 하나씩 element로 전달된다.
      console.log(element);
    });
    array.forEach(function(element, i){
      console.log(i, element);
    });

    // filter()
    array.filter(function(element){
      return element.length > 5;  // 길이가 5보다 큰 요소만 남긴 배열을 반환함
    }).forEach(function(element){
      console.log(element);
    });
    // 화살표
    array.filter((element) => element.length > 5)
         .forEach((element) => {console.log(element);});

    // map()
    array.map(function(element){
      return element + '가자';   // 모든 요소 뒤에 '가자'를 추가한 배열을 반환함
    }).forEach(function(element){
      console.log(element); 
    });

  </script>

  <script>
    // < Math 내장 함수 >

    console.log('절대값', Math.abs(-5));  //5

    console.log('정수 올림값', Math.ceil(5.1));   //6
    console.log('정수 올림값', Math.ceil(-5.1));  //-5

    console.log('정수 내림값', Math.floor(5.1));   //5
    console.log('정수 내림값', Math.floor(-5.1));  //-6

    console.log('정수 반올림값', Math.round(5.5));   //6
    console.log('정수 반올림값', Math.round(-5.5));  //-5

    console.log('정수 절사값', Math.trunc(5.5));   //5
    console.log('정수 절사값', Math.trunc(-5.5));  //-5

    console.log('제곱', Math.pow(2, 3));  // 2 ** 3  == 8
    console.log('재곱근', Math.sqrt(25)); // 루트 25 == 5

    console.log('난수', Math.random());   // 0 <= 난수 < 1
    console.log('주사위', parseInt(Math.random() * 6 + 1));
   
  </script>

  <script>
    // < Date 내장 객체 >

    // 현재 날짜와 시간
    var now = Date();  // new Date().toSring()
    console.log(now, typeof now);

    // 특정 날짜와 시간
    var someday = new Date(2024, 0, 1, 12, 0, 0);  // 월은 0~11 사이 값을 가짐 (2024-01-01 12:00:00)
    console.log(someday, typeof someday);

    // 타임스탬프
    var timeStamp = Date.now();
    console.log(timeStamp, typeof timeStamp);

    // 날자/시간 단위 가져오기
    var now = new Date();  // object 형식의 now
    var year = now.getFullYear();
    var month = now.getMonth() + 1;  // getMonth는 월이 아니라 월의 인덱스를 보여주기때문에 +1
    var day = now.getDate();
    var hour = now. getHours(); 
    var minute = now. getMinutes(); 
    var second =  now.getSeconds();
    var timeStamp = now.getTime();
    console.log(now, year, month, day, hour, minute, second, timeStamp);

  </script>

  <script>
    // < String 내장 객체 >

    var str = 'JavaScript';

    // 길이 반환
    console.log(str.length);  // 괄호가 없는 length 속성

    // 특정 인덱스의 문자 반환
    console.log('첫번째 글자', str.charAt(0));
    console.log('마지막 글자', str.charAt(str.length - 1));

    // 특정 문자의 인덱스 반환
    console.log('첫번째 인덱스', str.indexOf('a'));
    console.log('마지막 인덱스', str.lastIndexOf('a'));

    // 일부 문자열 반환 (substring만이라도 잘 기억하자!!)
    console.log('Java', str.substring(0, 4)); // 인덱스 기준 0부터 4전까지 
    console.log('Script', str.substring(4));  // 인덱스 기준 4부터 끝까지
    console.log('Java', str.substr(0, 4));    // 인덱스 기준 0부터 4글자 (사용 x)
    console.log('Script', str.substr(4));     // 인덱스 4부터 끝까지 (사용 x)
    console.log('Java', str.slice(0, 4));     // 인덱스 기준 0부터 4전까지 
    console.log('Script', str.slice(4));      // 인덱스 기준 4부터 문자열 끝까지
    console.log('Java', str.slice(-10, -6));  // 인덱스 -10 <= 문자열 < 인덱스 -6 (마지막 글자의 인덱스는 -1이다.)
    console.log('Script', str.slice(-6));     // 인덱스 -6 <= 문자열 끝까지

    // 특정 패턴을 가지는지 검사 결과를 반환
    console.log(str.startsWith('Java'));  // java로 시작하면 true
    console.log(str.endsWith('Script'));  // script로 끝나면 true
    console.log(str.match(/[A-Z]/));      // 정규식 (매칭하는 부분이 있으면 캡처된 결과의 인덱스를 보여준다)

    // 치환 결과를 반환
    console.log(str.replace('a', '_'));         // 발견된 첫 번째 a를 _로 치환
    console.log(str.replaceAll(/[A-Z]/g, '_')); // 정규식(대문자) 매칭하는 모든 부분을 _로 치환

    // 문자열 연결 결과 반환
    console.log(str.concat('a', 'bc'));

    // 반복 결과 반환
    console.log(str.repeat(3));

    // 대소문자 변환 결과 반환
    console.log('대문자', str.toUpperCase());
    console.log('소문자', str.toLowerCase());

    // 문자열 앞 뒤에 포함된 불필요한 공백 제거 결과 반환
    var str = '   Java   Script   '
    console.log('앞뒤공백제거', str.trim());
    console.log('앞공백제거', str.trimStart()); // alias trimLeft() 가능
    console.log('뒤공백제거', str.trimEnd());   // alias trimRight() 가능

    // 문자열 앞뒤에 특정 문자 채운 결과 반환
    var str = 'JavaScript';
    console.log('앞에채우기', str.padStart(15, '*')); // 전체 15자리 중 부족한 부분은 *로 채우기
    console.log('뒤에채우기', str.padEnd(15, '*'));

    // 문자열 객체 다루기
    var str = new String('JavaScript');
    console.log(str, typeof str);
    console.log(str.valueOf(), typeof str.valueOf());
    /*
    JavaScript에서는 모든 것이 객체로 취급됩니다. 
    typeof 연산자는 변수의 데이터 유형을 반환하는 데 사용됩니다. 
    그러나 객체의 경우 typeof 연산자는 'object'를 반환합니다. 
    typeof 연산자는 원시 자료형(primitive data types)과 객체(object)를 구별합니다. 
    원시 자료형은 숫자, 문자열, 불리언, null, undefined, Symbol입니다. 
    하지만 객체는 이러한 원시 자료형과는 달리 복합적인 데이터 구조를 가질 수 있으므로, 
    typeof 연산자로 객체를 확인할 때 'object'를 반환합니다.
    따라서 new String('JavaScript')은 String 객체를 생성하므로 해당 변수의 타입은 'object'가 됩니다. 
    이것은 내부적으로 JavaScript 엔진이 객체를 처리하는 방식입니다.
    */

    // 문자열을 분리해서 배열 반환
    var str = 'a,b,c,d,e';
    var array = str.split(',');
    console.log(array);
    var str = array.join(',');
    console.log(str);

    // 활용. 특정 문자 모두 찾아 바꾸기
    console.log(str.split(',').join(''));  // split(찾을 문자).join(바꿀 문자)

  </script>
  
</body>
</html>